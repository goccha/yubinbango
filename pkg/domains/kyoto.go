package domains

import (
	"context"
	"strings"

	"github.com/goccha/logging/log"
)

func ParseKyoto(ctx context.Context, addr string) (string, bool) {
	runes := []rune(addr)
	buf := strings.Builder{}
	buf.Grow(len(runes) * 2)
	found := false
	for i := 0; i < len(runes); i++ {
		found = false
		for j := i + 1; j <= len(runes); j++ {
			key := string(runes[i:j])
			if v, ok := _dictionary[key]; ok {
				buf.WriteString(v)
				i = j - 1
				found = true
				break
			}
		}
		if !found {
			log.Error(ctx).Msgf("not found: %s (%s)", string(runes[i:]), addr)
			return "", false
		}
	}
	return buf.String(), true
}

var _dictionary = map[string]string{
	"上長者町":  "カミチョウジャマチ",
	"下長者町":  "シモチョウジャマチ",
	"中之町":   "ナカノチョウ",
	"両替町":   "リョウガエチョウ",
	"丸太町":   "マルタチョウ",
	"猪熊":    "イノクマ",
	"一条":    "イチジョウ",
	"二条":    "ニジョウ",
	"三条":    "サンジョウ",
	"四条":    "シジョウ",
	"五条":    "ゴジョウ",
	"六条":    "ロクジョウ",
	"七条":    "シチジョウ",
	"七本松":   "シチホンマツ",
	"大宮":    "オオミヤ",
	"椹木町":   "サワラギチョウ",
	"烏丸":    "カラスマ",
	"今出川":   "イマデガワ",
	"元誓願寺":  "モトセイガンジ",
	"浄福寺":   "ジョウフクジ",
	"出水":    "イデミズ",
	"寺町":    "テラマチ",
	"裏寺町":   "ウラデラマチ",
	"石薬師":   "イシヤクシ",
	"寺之内":   "テラノウチ",
	"智恵光院":  "チエコウイン",
	"中筋":    "ナカスジ",
	"上立売":   "カミダチウリ",
	"中立売":   "ナカダチウリ",
	"下立売":   "シモダチウリ",
	"油小路":   "アブラノコウジ",
	"葭屋町":   "ヨシヤマチ",
	"御前":    "オンマエ",
	"荒神口":   "コウジンクチ",
	"松屋町":   "マツヤチョウ",
	"六軒町":   "ロッケンチョウ",
	"五辻":    "ゴツジ",
	"上御霊前":  "カミミタマエ",
	"蘆山寺":   "ロザンジ",
	"下ノ森":   "シモノモリ",
	"中長者町":  "ナカチョウジャマチ",
	"東堀川":   "ヒガシホリカワ",
	"黒門":    "クロモン",
	"塔之段":   "トウノダン",
	"竹屋町":   "タケヤチョウ",
	"日暮":    "ヒグラシ",
	"蛸薬師":   "タコヤクシ",
	"富小路":   "トミコウジ",
	"柳馬場":   "ヤナギババ",
	"姉小路":   "アネコウジ",
	"御池":    "オイケ",
	"小川":    "オガワ",
	"夷川":    "エビスガワ",
	"先斗町":   "ポントチョウ",
	"釜座":    "カマザ",
	"六角":    "ロッカク",
	"御幸町":   "ミユキチョウ",
	"錦小路":   "ニシキコウジ",
	"麩屋町":   "フヤチョウ",
	"醒ケ井":   "サメガイ",
	"車屋町":   "クルマヤチョウ",
	"西木屋町":  "ニシキヤマチ",
	"押小路":   "オシコウジ",
	"衣棚":    "コロモダナ",
	"京極":    "キョウゴク",
	"高倉":    "タカクラ",
	"渋谷":    "シブタニ",
	"大路":    "オオジ",
	"間之町":   "マノチョウ",
	"大黒町":   "ダイコクチョウ",
	"柿町":    "カキマチ",
	"高辻":    "タカツジ",
	"松原":    "マツバラ",
	"万寿寺":   "マンジュジ",
	"花屋町":   "ハナヤチョウ",
	"正面":    "ショウメン",
	"木屋町":   "キヤマチ",
	"二ノ宮":   "ニノミヤ",
	"鍵屋町":   "カギヤチョウ",
	"諏訪町":   "スワンチョウ",
	"北小路":   "キタコウジ",
	"若宮":    "ワカミヤ",
	"木津屋橋":  "キヅヤバシ",
	"下魚棚":   "シモウオダナ",
	"仏光寺":   "ブッコウジ",
	"楊梅":    "ヨウバイ",
	"上ノ口":   "カミノクチ",
	"室町":    "ムロマチ",
	"西中筋":   "ニシナカスジ",
	"土手町":   "ドテマチ",
	"上枳殻馬場": "カミキコクノバンバ",
	"下枳殻馬場": "シモキコクノバンバ",
	"岩上":    "イワカミ",
	"下坂":    "シモサカ",
	"上珠数屋町": "カミジュズヤマチ",
	"下珠数屋町": "シモジュズヤマチ",
	"不明門":   "フメイモン",
	"綾小路":   "アヤコウジ",
	"塩小路":   "シオコウジ",
	"西堀川":   "ニシホリカワ",
	"三ノ宮":   "サンノミヤ",
	"須原":    "スハラ",
	"東中筋":   "ヒガシナカスジ",
	"的場":    "マトバ",

	"高瀬川筋":   "タカセガワスジ",
	"神宮道":    "ジングウミチ",
	"白川橋":    "シラカワバシ",
	"麸屋町":    "フヤチョウ",
	"紙屋川":    "カミヤガワ",
	"妙心寺道":   "ミョウシンジミチ",
	"裏上の下立売": "ウラカミノシモダチウリ",
	"裏下立売":   "ウラシモダチウリ",
	"広小路":    "ヒロコウジ",
	"新町之間":   "シンマチノマイダ",
	"大橋":     "オオハシ",
	"加茂川筋":   "カモガワスジ",
	"天神道":    "テンジンミチ",
	"仁和寺街道":  "ニンナジカイドウ",
	"千本":     "センボン",
	"半丁":     "ハンチョウ",
	"御霊図子":   "ゴリョウズシ",
	"堺町":     "サカイチョウ",
	"洞院":     "ノトウイン",
	"通":      "ドオリ",
	"新":      "シン",
	"旧":      "キュウ",
	"上の":     "カミノ",
	"の間":     "ノアイダ",
	"之間":     "ノアイダ",
	"ノ間":     "ノアイダ",
	"上る":     "アガル",
	"下る":     "サガル",
	"入":      "イル",
	"丁目":     "チョウメ",
	"筋目":     "スジメ",
	"東":      "ヒガシ",
	"西":      "ニシ",
	"河原":     "カワラ",
	"町":      "マチ",
	"堀川":     "ホリカワ",
	"西裏":     "ニシウラ",
	"１":      "１",
	"２":      "２",
	"３":      "３",
	"４":      "４",
	"５":      "５",
	"６":      "６",
	"７":      "７",
	"８":      "８",
	"９":      "９",
	"０":      "０",
}
